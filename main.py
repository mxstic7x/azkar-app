import flet as ft

# ------------------- ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฃุฐูุงุฑ ุงููุงููุฉ -------------------
AZKAR_DATA = {
  "morning": [
    {"text": "ุฃูุนููุฐู ุจูุงูููู ูููู ุงูุดููููุทูุงูู ุงูุฑููุฌูููู. ุงููููู ูุงู ุฅูููููู ุฅููุงูู ูููู ุงููุญูููู ุงูููููููููู ูุงู ุชูุฃูุฎูุฐููู ุณูููุฉู ูููุงู ูููููู... [ุขูุฉ ุงููุฑุณู]", "count": 1, "desc": "ูู ูุงููุง ุญูู ูุตุจุญ ุฃุฌูุฑ ูู ุงูุฌู ุญุชู ููุณู ููู ูุงููุง ุญูู ููุณู ุฃุฌูุฑ ูู ุงูุฌู ุญุชู ูุตุจุญ."},
    {"text": "ุจูุณููู ุงูููู ุงูุฑููุญูููู ุงูุฑููุญููู. ูููู ูููู ูฑูููููู ุฃูุญูุฏูุ ูฑูููููู ูฑูุตููููุฏู...", "count": 3, "desc": "ุชูููู ูู ูู ุดูุก."},
    {"text": "ุจูุณููู ุงูููู ุงูุฑููุญูููู ุงูุฑููุญููู. ูููู ุฃูุนููุฐู ุจูุฑูุจูู ูฑูููููููู...", "count": 3, "desc": "ุชูููู ูู ูู ุดูุก."},
    {"text": "ุจูุณููู ุงูููู ุงูุฑููุญูููู ุงูุฑููุญููู. ูููู ุฃูุนููุฐู ุจูุฑูุจูู ูฑููููุงุณู...", "count": 3, "desc": "ุชูููู ูู ูู ุดูุก."},
    {"text": "ุฃูุตููุจูุญููุง ููุฃูุตููุจูุญู ุงูููููููู ููู ููุงูุญููุฏู ูููุ ูุง ุฅููู ุฅูุงู ุงููููู ููุญุฏููู ูุง ุดูุฑููู ููู...", "count": 1, "desc": ""},
    {"text": "ุงูููููููู ุฃูููุชู ุฑูุจูููู ูุง ุฅููู ุฅูุงู ุฃูููุชูุ ุฎูููููุชูููู ููุฃููุง ุนูุจููุฏูู... (ุณูุฏ ุงูุงุณุชุบูุงุฑ)", "count": 1, "desc": "ูู ูุงููุง ููููุง ุจูุง ุญูู ููุณู ููุงุช ูู ูููุชู ุฏุฎู ุงูุฌูุฉ."},
    {"text": "ุฑูุถููุชู ุจูุงูููู ุฑูุจูููุงู ููุจูุงูุฅุณููุงูู ุฏูููุงู ููุจูููุญูููููุฏู ุตูู ุงููู ุนููู ูุณูู ููุจููููุงู.", "count": 3, "desc": "ูุงู ุญูุง ุนูู ุงููู ุฃู ูุฑุถูู ููู ุงูููุงูุฉ."},
    {"text": "ุงููููููููู ุฅูููููู ุฃูุตูุจููุญูุชู ุฃูุดููููุฏููุ ููุฃูุดููููุฏู ุญููููููุฉู ุนููุฑูุดููู...", "count": 4, "desc": "ูู ูุงููุง ุฃุนุชูู ุงููู ูู ุงููุงุฑ."},
    {"text": "ุงููููููููู ูุง ุฃูุตูุจูููุญู ุจู ููููู ููุนููููุฉู ุฃูู ุจูุฃูุญููุฏู ููููู ุฎููููููู...", "count": 1, "desc": "ูู ูุงููุง ุตุจุงุญุง ุฃุฏู ุดูุฑ ูููู."},
    {"text": "ุญูุณูุจูููู ุงููููู ูุง ุฅููู ุฅูุงู ูููู ุนููููููู ุชููููููููุชู ูููููู ุฑูุจูู ุงูุนูุฑูุดู ุงูุนูุธููู.", "count": 7, "desc": "ููุงู ุงููู ูุง ุฃููู ูู ุฃูุฑ ุงูุฏููุง ูุงูุฃุฎุฑุฉ."},
    {"text": "ุจูุณููู ุงูููู ุงูุฐู ูุง ููุถููุฑูู ููุนู ุงุณููููู ุดููุกู ูู ุงูุฃุฑูุถู ูููุง ูู ุงูุณูููุงุกู...", "count": 3, "desc": "ูู ูุถุฑู ูู ุงููู ุดูุก."},
    {"text": "ุงููููููููู ุจููู ุฃูุตููุจูุญููุง ููุจููู ุฃูููุณููููุงุ ููุจููู ููุญูููุง ููุจููู ููููููุชู ููุฅูููููููู ุงูููููุดููุฑ.", "count": 1, "desc": ""},
    {"text": "ุฃูุตูุจููุญูููุง ุนูููู ููุทูุฑูุฉู ุงูุฅุณููุงูููุ ููุนูููู ููููููุฉู ุงูุฅูุฎููุงูุตู...", "count": 1, "desc": ""},
    {"text": "ุณูุจูุญูุงูู ุงูููู ููุจูุญููููุฏููู ุนูุฏูุฏู ุฎูููููููุ ููุฑูุถูุง ููููุณูููุ ููุฒููููุฉู ุนููุฑูุดูููุ ูููููุฏุงุฏู ููููููุงุชููู.", "count": 3, "desc": ""},
    {"text": "ุงููููููููู ุนุงููููู ูู ุจูุฏููููุ ุงููููููููู ุนุงููููู ูู ุณููููุนูุ ุงููููููููู ุนุงููููู ูู ุจูุตููุฑู...", "count": 3, "desc": ""},
    {"text": "ุงููููููููู ุฅููููู ุฃูุนููุฐู ุจููู ูููู ุงููููููุฑุ ููุงููููููุฑุ ููุฃูุนููุฐู ุจููู ูููู ุนูุฐุงุจู ุงููููุจูุฑ...", "count": 3, "desc": ""},
    {"text": "ุงููููููููู ุฅูููููู ุฃุณููุฃูููููู ุงูุนูููููู ููุงูุนูุงููููุฉู ูู ุงูุฏููููููุง ููุงูุขุฎููุฑูุฉ...", "count": 1, "desc": ""},
    {"text": "ููุง ุญูููู ููุง ููููููู ุจูุฑูุญูููุชููู ุฃุณูุชูุบููุซู ุฃุตูููุญู ููู ุดูุฃููู ููููููู...", "count": 3, "desc": ""},
    {"text": "ุฃูุตูุจููุญูููุง ููุฃูุตูุจููุญู ุงููููููู ูููู ุฑูุจูู ุงูุนูุงููููููุ ุงููููููููู ุฅูููููู ุฃุณููุฃูููููู ุฎููููุฑู ููุฐุง ุงููููููู...", "count": 1, "desc": ""},
    {"text": "ุงููููููููู ุนุงููููู ุงูุบููููุจู ููุงูุดูููุงุฏูุฉู ูุงุทููุฑู ุงูุณููุงูุงุชู ููุงูุฃุฑูุถู...", "count": 1, "desc": ""},
    {"text": "ุฃูุนููุฐู ุจูููููููุงุชู ุงููููู ุงูุชููุงูููุงุชู ูููู ุดููุฑูู ูุง ุฎููููู.", "count": 3, "desc": ""},
    {"text": "ุงููููููููู ุตูููู ููุณูููููู ููุจูุงุฑููู ุนูู ุณูุฏูุง ููุญูููุฏ.", "count": 10, "desc": "ุฃุฏุฑูุชู ุดูุงุนุชู ููู ุงูููุงูุฉ."},
    {"text": "ุงููููููููู ุฅููููุง ููุนููุฐู ุจููู ูููู ุฃููู ููุดูุฑููู ุจููู ุดูููุฆูุง ููุนููููููู...", "count": 3, "desc": ""},
    {"text": "ุงููููููููู ุฅููููู ุฃูุนููุฐู ุจููู ูููู ุงููููููู ููุงููุญูุฒูููุ ููุฃูุนููุฐู ุจููู ูููู ุงููุนูุฌูุฒู ููุงููููุณููู...", "count": 3, "desc": ""},
    {"text": "ุฃุณูุชูุบูููุฑู ุงูููู ุงูุนูุธูููู ุงูููุฐูู ูุงู ุฅูููู ุฅูุงูู ููููุ ุงูุญูููู ุงูููููููููุ ููุฃุชููุจู ุฅููููู.", "count": 3, "desc": ""},
    {"text": "ููุง ุฑูุจููุ ูููู ุงููุญูููุฏู ููููุง ููููุจูุบูู ููุฌูููุงูู ููุฌูููููุ ููููุนูุธูููู ุณูููุทูุงูููู.", "count": 3, "desc": ""},
    {"text": "ุงููููููููู ุฅููููู ุฃูุณูุฃููููู ุนูููููุง ููุงููุนูุงุ ููุฑูุฒูููุง ุทููููุจูุงุ ููุนูููููุง ููุชูููุจููููุง.", "count": 1, "desc": ""},
    {"text": "ุงููููููููู ุฃูููุชู ุฑูุจููู ูุง ุฅููููู ุฅููุง ุฃูููุชูุ ุนููููููู ุชููููููููุชู...", "count": 1, "desc": ""},
    {"text": "ููุง ุฅููู ุฅููุง ุงูููู ููุญูุฏููู ููุง ุดูุฑูููู ููููุ ูููู ุงูููููููู ูููููู ุงููุญูููุฏู...", "count": 100, "desc": "ูุงูุช ูู ุนุฏู ุนุดุฑ ุฑูุงุจุ ููุชุจุช ูู ูุฆุฉ ุญุณูุฉ."},
    {"text": "ุณูุจูุญูุงูู ุงูููู ููุจูุญููููุฏููู.", "count": 100, "desc": "ุญูุทููุชู ุฎูุทูุงููุงูู ููุฅููู ููุงููุชู ููุซููู ุฒูุจูุฏู ุงููุจูุญูุฑู."},
    {"text": "ุฃุณูุชูุบูููุฑู ุงูููู ููุฃุชููุจู ุฅูููููู.", "count": 100, "desc": ""}
  ],
  "evening": [
    {"text": "ุฃูุนููุฐู ุจูุงูููู ูููู ุงูุดููููุทูุงูู ุงูุฑููุฌูููู. ุขูุฉ ุงููุฑุณู...", "count": 1, "desc": "ุฃุฌูุฑ ูู ุงูุฌู."},
    {"text": "ุขูููู ุงูุฑููุณูููู ุจูููุง ุฃูููุฒููู ุฅููููููู ูููู ุฑูุจูููู... [ุฎูุงุชูู ุงูุจูุฑุฉ]", "count": 1, "desc": "ูู ูุฑุฃููุง ูู ูููุฉ ููุชุงู."},
    {"text": "ูููู ูููู ูฑูููููู ุฃูุญูุฏู (3) - ุงูููู (3) - ุงููุงุณ (3)", "count": 3, "desc": "ุชูููู ูู ูู ุดูุก."},
    {"text": "ุฃูุณูููุง ูุฃูุณูู ุงููููู ููู ูุงูุญูุฏ ููู...", "count": 1, "desc": ""},
    {"text": "ุงูููู ุฃูุช ุฑุจู ูุง ุฅูู ุฅูุง ุฃูุช... (ุณูุฏ ุงูุงุณุชุบูุงุฑ)", "count": 1, "desc": "ูู ูุงุช ูู ูููุชู ุฏุฎู ุงูุฌูุฉ."},
    {"text": "ุฑุถููุช ุจุงููู ุฑุจูุง ูุจุงูุฅุณูุงู ุฏูููุง ูุจูุญููุฏ ุตูู ุงููู ุนููู ูุณูู ูุจููุง.", "count": 3, "desc": "ูุงู ุญูุง ุนูู ุงููู ุฃู ูุฑุถูู."},
    {"text": "ุงููููู ุฅููู ุฃูุณูุช ุฃุดููุฏู... ุฃูู ุฃูุช ุงููู...", "count": 4, "desc": "ุฃุนุชูู ุงููู ูู ุงููุงุฑ."},
    {"text": "ุงููููู ูุง ุฃูุณู ุจู ููู ูุนููุฉ ุฃู ุจุฃุญูุฏ ููู ุฎูููู...", "count": 1, "desc": "ุฃุฏู ุดูุฑ ูููุชู."},
    {"text": "ุญุณุจูู ุงููู ูุง ุฅูู ุฅูุง ูู ุนูููู ุชููููุช...", "count": 7, "desc": "ููุงู ุงููู ูุง ุฃููู."},
    {"text": "ุจุณูู ุงููู ุงูุฐู ูุง ูุถูุฑ ูุน ุงุณููู ุดูุก...", "count": 3, "desc": "ูู ูุถุฑู ุดูุก."},
    {"text": "ุงููููู ุจู ุฃูุณูููุง ูุจู ุฃุตูุจุญูุง...", "count": 1, "desc": ""},
    {"text": "ุฃูุณููุง ุนูู ูุทุฑุฉ ุงูุฅุณูุงู...", "count": 1, "desc": ""},
    {"text": "ุณุจุญูุงู ุงููู ูุจุญููุฏู ุนุฏุฏ ุฎูููู...", "count": 3, "desc": ""},
    {"text": "ุงููููู ุนุงูููู ูู ุจุฏููู...", "count": 3, "desc": ""},
    {"text": "ุงููููู ุฅููู ุฃุนููุฐ ุจู ูู ุงููููุฑ ูุงููููุฑ...", "count": 3, "desc": ""},
    {"text": "ุงููููู ุฅููู ุฃุณูุฃููู ุงูุนููู ูุงูุนูุงูููุฉ...", "count": 1, "desc": ""},
    {"text": "ูุง ุญู ูุง ูููู ุจุฑุญูุชู ุฃุณุชุบูุซ...", "count": 3, "desc": ""},
    {"text": "ุฃูุณููุง ูุฃูุณู ุงูููู ููู ุฑุจ ุงูุนุงูููู...", "count": 1, "desc": ""},
    {"text": "ุงููููู ุนุงููู ุงูุบููุจ ูุงูุดููุงุฏุฉ ูุงุทูุฑ ุงูุณูุงูุงุช...", "count": 1, "desc": ""},
    {"text": "ุฃูุนููุฐู ุจูููููููุงุชู ุงููููู ุงูุชููุงูููุงุชู ูููู ุดููุฑูู ูุง ุฎููููู.", "count": 3, "desc": ""},
    {"text": "ุงูููู ุตู ูุณูู ูุจุงุฑู ุนูู ูุจููุง ูุญูุฏ.", "count": 10, "desc": "ุฃุฏุฑูุชู ุดูุงุนุชู."},
    {"text": "ุงูููู ุฅูุง ูุนูุฐ ุจู ูู ุฃู ูุดุฑู ุจู ุดูุฆุง ูุนููู...", "count": 3, "desc": ""},
    {"text": "ุงูููู ุฅูู ุฃุนูุฐ ุจู ูู ุงููู ูุงูุญุฒู...", "count": 3, "desc": ""},
    {"text": "ุฃุณุชุบูุฑ ุงููู ุงูุนุธูู ุงูุฐู ูุง ุฅูู ุฅูุง ูู...", "count": 3, "desc": ""},
    {"text": "ูุง ุฑุจ , ูู ุงูุญูุฏ ููุง ููุจุบู ูุฌูุงู ูุฌูู...", "count": 3, "desc": ""},
    {"text": "ุงูููู ุฅูู ุฃุณุฃูู ุนููุง ูุงูุนุงุ ูุฑุฒูุง ุทูุจุง...", "count": 1, "desc": ""},
    {"text": "ุงูููู ุฃูุช ุฑุจู ูุง ุฅูู ุฅูุง ุฃูุช ุ ุนููู ุชูููุช...", "count": 1, "desc": ""},
    {"text": "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ูู...", "count": 100, "desc": ""},
    {"text": "ุณูุจูุญูุงูู ุงูููู ููุจูุญููููุฏููู.", "count": 100, "desc": ""},
    {"text": "ุฃุณูุชูุบูููุฑู ุงูููู ููุฃุชููุจู ุฅูููููู", "count": 100, "desc": ""}
  ],
  "sleep": [
    {"text": "ุงููููููููู ุฅููููููู ุฎููููููุชู ููููุณูู ููุฃููููุชู ุชููููููุงููุง...", "count": 1, "desc": ""},
    {"text": "ุงููููููููู ููููู ุนูุฐุงุจูููู ููููููู ุชูุจููุนูุซู ุนูุจูุงุฏูู.", "count": 3, "desc": "ูููููุง ุญูู ูุถุน ูุฏู ุงููููู ุชุญุช ุฎุฏู ุงูุฃููู."},
    {"text": "ุจูุงุณูููููู ุงููููููููู ุฃููููุชู ููุฃูุญูููุง.", "count": 1, "desc": ""},
    {"text": "ุจุงุณูู ุฑุจ ูุถุนุช ุฌูุจู ูุจู ุฃุฑูุนู...", "count": 1, "desc": ""},
    {"text": "ุงูููู ุฃุณููุช ููุณู ุฅูููุ ููุฌูุช ูุฌูู ุฅููู...", "count": 1, "desc": "ูู ูุงููุง ููุงุช ูู ูููุชู ูุงุช ุนูู ุงููุทุฑุฉ."},
    {"text": "ุงููุญูููุฏู ูููู ุงูููุฐู ุฃูุทููุนููููุง ููุณูููุงูุง...", "count": 1, "desc": ""},
    {"text": "ุณูุจูุญูุงูู ุงููููู (33) , ุงููุญูููุฏู ููููููู (33) , ุงูููููู ุฃูููุจูุฑู (34)", "count": 1, "desc": "ุฎูุฑ ูู ูู ุฎุงุฏู."},
    {"text": "ุงูุฅุฎูุงุต ูุงููุนูุฐุชูู (ูุน ุงูููุซ ูุงููุณุญ ุนูู ุงูุฌุณุฏ)", "count": 3, "desc": ""}
  ]
}

def main(page: ft.Page):
    page.title = "ุฐูุฑูู"
    page.theme_mode = ft.ThemeMode.LIGHT
    page.rtl = True
    page.vertical_alignment = ft.MainAxisAlignment.CENTER
    page.horizontal_alignment = ft.CrossAxisAlignment.CENTER
    page.window_width = 380
    page.window_height = 740
    page.bgcolor = "#F5F5F5"

    PRIMARY_COLOR = "#2E7D32" 

    # ูุชุบูุฑุงุช ุงูุญุงูุฉ
    current_category = []
    current_index = 0
    current_count = 0

    # ุนูุงุตุฑ ูุงุฌูุฉ ุงูุฃุฐูุงุฑ
    txt_zikr = ft.Text("", size=20, weight="w600", text_align="center", color="#333333")
    txt_desc = ft.Text("", size=14, color="grey", text_align="center", italic=True)
    txt_counter_display = ft.Text("0", size=40, weight="bold", color="white")
    txt_progress = ft.Text("", color=PRIMARY_COLOR)

    # ุฒุฑ ุงูุชุณุจูุญ ุงููุจูุฑ
    btn_sbh = ft.Container(
        content=txt_counter_display,
        width=180, height=180,
        bgcolor=PRIMARY_COLOR,
        border_radius=90,
        alignment=ft.alignment.center,
        on_click=lambda e: on_counter_click(e),
        shadow=ft.BoxShadow(blur_radius=15, color=ft.colors.with_opacity(0.3, "black")),
        animate_scale=ft.animation.Animation(100, ft.AnimationCurve.BOUNCE_OUT)
    )

    def update_azkar_ui():
        if current_index < len(current_category):
            item = current_category[current_index]
            txt_zikr.value = item['text']
            txt_desc.value = f"๐ {item['desc']}" if item['desc'] else ""
            txt_counter_display.value = str(current_count)
            txt_progress.value = f"ุงูุฐูุฑ {current_index + 1} / {len(current_category)}"
            btn_sbh.bgcolor = PRIMARY_COLOR
            btn_sbh.disabled = False
        else:
            txt_zikr.value = "โ ุชู ุงูุงูุชูุงุก ูู ุงูุฃุฐูุงุฑ.\nุชูุจู ุงููู ูููู."
            txt_desc.value = ""
            txt_counter_display.value = "โ"
            btn_sbh.bgcolor = "grey"
            btn_sbh.disabled = True # ุชุนุทูู ุงูุฒุฑ ูุคูุชุงู ุฃู ุชุบููุฑ ูุธููุชู ููุฑุฌูุน
        page.update()

    def on_counter_click(e):
        nonlocal current_count, current_index
        
        # ุชุฃุซูุฑ ุจุตุฑู ุนูุฏ ุงูุถุบุท
        btn_sbh.scale = 0.9
        btn_sbh.update()
        import time
        time.sleep(0.1)
        btn_sbh.scale = 1.0
        btn_sbh.update()

        if current_index >= len(current_category): return

        current_count -= 1
        if current_count > 0:
            txt_counter_display.value = str(current_count)
            txt_counter_display.update()
        else:
            current_index += 1
            if current_index < len(current_category):
                current_count = current_category[current_index]['count']
            update_azkar_ui()

    def start_session(cat_key):
        nonlocal current_category, current_index, current_count
        current_category = AZKAR_DATA[cat_key]
        current_index = 0
        current_count = current_category[0]['count']
        update_azkar_ui()
        page.go("/session")

    # ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
    home_view = ft.Column([
        ft.Icon(ft.icons.MOSQUE, size=80, color=PRIMARY_COLOR),
        ft.Text("ุชุทุจูู ุฐูุฑูู", size=30, weight="bold", color=PRIMARY_COLOR),
        ft.Container(height=30),
        ft.ElevatedButton("โ๏ธ ุฃุฐูุงุฑ ุงูุตุจุงุญ", on_click=lambda e: start_session("morning"), width=250, height=55, style=ft.ButtonStyle(bgcolor=PRIMARY_COLOR, color="white")),
        ft.Container(height=10),
        ft.ElevatedButton("๐ ุฃุฐูุงุฑ ุงููุณุงุก", on_click=lambda e: start_session("evening"), width=250, height=55, style=ft.ButtonStyle(bgcolor="#1565C0", color="white")),
        ft.Container(height=10),
        ft.ElevatedButton("๐ค ุฃุฐูุงุฑ ุงูููู", on_click=lambda e: start_session("sleep"), width=250, height=55, style=ft.ButtonStyle(bgcolor="#4527A0", color="white")),
    ], alignment=ft.MainAxisAlignment.CENTER, horizontal_alignment=ft.CrossAxisAlignment.CENTER)

    # ุดุงุดุฉ ุงูุฌูุณุฉ
    session_view = ft.Column([
        txt_progress,
        ft.Container(
            content=txt_zikr, 
            padding=20, 
            bgcolor="white", 
            border_radius=15,
            width=340,
            shadow=ft.BoxShadow(blur_radius=5, color=ft.colors.with_opacity(0.1, "black"))
        ),
        ft.Container(height=10),
        txt_desc,
        ft.Container(height=40),
        btn_sbh,
        ft.Container(height=30),
        ft.TextButton("ุฑุฌูุน ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ", icon=ft.icons.ARROW_BACK, on_click=lambda e: page.go("/"))
    ], alignment=ft.MainAxisAlignment.CENTER, horizontal_alignment=ft.CrossAxisAlignment.CENTER)

    def route_change(route):
        page.views.clear()
        page.views.append(ft.View("/", [home_view], bgcolor="#F5F5F5", vertical_alignment=ft.MainAxisAlignment.CENTER, horizontal_alignment=ft.CrossAxisAlignment.CENTER))
        if page.route == "/session":
            page.views.append(ft.View("/session", [session_view], bgcolor="#F5F5F5", vertical_alignment=ft.MainAxisAlignment.CENTER, horizontal_alignment=ft.CrossAxisAlignment.CENTER))
        page.update()

    def view_pop(view):
        page.views.pop()
        top_view = page.views[-1]
        page.go(top_view.route)

    page.on_route_change = route_change
    page.on_view_pop = view_pop
    page.go(page.route)

ft.app(target=main)