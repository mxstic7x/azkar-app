import flet as ft
import time

def main(page: ft.Page):
    # =====================================================================
    #                           ุฅุนุฏุงุฏุงุช ุงูุตูุญุฉ (Safe Mode)
    # =====================================================================
    
    # ุชุญููู ุงูุฎุท ูุน ุฎุท ุจุฏูู (Fallback) ูุถูุงู ุนุฏู ุงูุงูููุงุฑ
    page.fonts = {
        "Cairo": "https://github.com/google/fonts/raw/main/ofl/cairo/Cairo-Bold.ttf",
        "CairoReg": "https://github.com/google/fonts/raw/main/ofl/cairo/Cairo-Regular.ttf"
    }
    
    page.title = "ุฐูุฑูู"
    # ุงุณุชุฎุฏุงู ุฎุท ุงูุชุฑุงุถู ุจุฌุงูุจ ูุงูุฑู ูุชุฌูุจ ุงููุดุงูู
    page.theme = ft.Theme(font_family="Cairo") 
    page.theme_mode = ft.ThemeMode.LIGHT
    page.rtl = True
    page.scroll = "hidden"
    page.bgcolor = "#F0F4F8"
    page.window_width = 390
    page.window_height = 840

    try:
        # =====================================================================
        #                           ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฃุฐูุงุฑ (ูุงููุฉ)
        # =====================================================================
        AZKAR_DATA = {
            "morning": [
                {"text": "ุฃูุนููุฐู ุจูุงูููู ูููู ุงูุดููููุทูุงูู ุงูุฑููุฌูููู. ุงููููู ูุงู ุฅูููููู ุฅููุงูู ูููู ุงููุญูููู ุงูููููููููู ูุงู ุชูุฃูุฎูุฐููู ุณูููุฉู ูููุงู ูููููู... [ุขูุฉ ุงููุฑุณู]", "count": 1, "desc": "ูู ูุงููุง ุญูู ูุตุจุญ ุฃุฌูุฑ ูู ุงูุฌู ุญุชู ููุณู"},
                {"text": "ุจูุณููู ุงูููู ุงูุฑููุญูููู ุงูุฑููุญููู. ูููู ูููู ูฑูููููู ุฃูุญูุฏูุ ูฑูููููู ูฑูุตููููุฏู... (3 ูุฑุงุช)", "count": 3, "desc": "ุชูููู ูู ูู ุดูุก"},
                {"text": "ุจูุณููู ุงูููู ุงูุฑููุญูููู ุงูุฑููุญููู. ูููู ุฃูุนููุฐู ุจูุฑูุจูู ูฑูููููููู... (3 ูุฑุงุช)", "count": 3, "desc": "ุชูููู ูู ูู ุดูุก"},
                {"text": "ุจูุณููู ุงูููู ุงูุฑููุญูููู ุงูุฑููุญููู. ูููู ุฃูุนููุฐู ุจูุฑูุจูู ูฑููููุงุณู... (3 ูุฑุงุช)", "count": 3, "desc": "ุชูููู ูู ูู ุดูุก"},
                {"text": "ุฃูุตููุจูุญููุง ููุฃูุตููุจูุญู ุงูููููููู ููู ููุงูุญููุฏู ูููุ ูุง ุฅููู ุฅูุงู ุงููููู ููุญุฏููู ูุง ุดูุฑููู ููู...", "count": 1, "desc": ""},
                {"text": "ุงูููููููู ุฃูููุชู ุฑูุจูููู ูุง ุฅููู ุฅูุงู ุฃูููุชูุ ุฎูููููุชูููู ููุฃููุง ุนูุจููุฏูู... (ุณูุฏ ุงูุงุณุชุบูุงุฑ)", "count": 1, "desc": "ูู ูุงููุง ููููุง ุจูุง ููุงุช ุฏุฎู ุงูุฌูุฉ"},
                {"text": "ุฑูุถููุชู ุจูุงูููู ุฑูุจูููุงู ููุจูุงูุฅุณููุงูู ุฏูููุงู ููุจูููุญูููููุฏู ุตูู ุงููู ุนููู ูุณูู ููุจููููุงู.", "count": 3, "desc": "ูุงู ุญูุง ุนูู ุงููู ุฃู ูุฑุถูู ููู ุงูููุงูุฉ"},
                {"text": "ุงููููููููู ุฅูููููู ุฃูุตูุจููุญูุชู ุฃูุดููููุฏููุ ููุฃูุดููููุฏู ุญููููููุฉู ุนููุฑูุดููู... (4 ูุฑุงุช)", "count": 4, "desc": "ูู ูุงููุง ุฃุนุชูู ุงููู ูู ุงููุงุฑ"},
                {"text": "ุงููููููููู ูุง ุฃูุตูุจูููุญู ุจู ููููู ููุนููููุฉู ุฃูู ุจูุฃูุญููุฏู ููููู ุฎููููููู...", "count": 1, "desc": "ุฃุฏู ุดูุฑ ูููู"},
                {"text": "ุญูุณูุจูููู ุงููููู ูุง ุฅููู ุฅูุงู ูููู ุนููููููู ุชููููููููุชู... (7 ูุฑุงุช)", "count": 7, "desc": "ููุงู ุงููู ูุง ุฃููู ูู ุฃูุฑ ุงูุฏููุง ูุงูุฃุฎุฑุฉ"},
                {"text": "ุจูุณููู ุงูููู ุงูุฐู ูุง ููุถููุฑูู ููุนู ุงุณููููู ุดููุกู ูู ุงูุฃุฑูุถู ูููุง ูู ุงูุณูููุงุกู...", "count": 3, "desc": "ูู ูุถุฑู ูู ุงููู ุดูุก"},
                {"text": "ุงููููููููู ุจููู ุฃูุตููุจูุญููุง ููุจููู ุฃูููุณููููุงุ ููุจููู ููุญูููุง ููุจููู ููููููุชู ููุฅูููููููู ุงูููููุดููุฑ.", "count": 1, "desc": ""},
                {"text": "ุฃูุตูุจููุญูููุง ุนูููู ููุทูุฑูุฉู ุงูุฅุณููุงูููุ ููุนูููู ููููููุฉู ุงูุฅูุฎููุงูุตู...", "count": 1, "desc": ""},
                {"text": "ุณูุจูุญูุงูู ุงูููู ููุจูุญููููุฏููู ุนูุฏูุฏู ุฎูููููููุ ููุฑูุถูุง ููููุณูููุ ููุฒููููุฉู ุนููุฑูุดูููุ ูููููุฏุงุฏู ููููููุงุชููู.", "count": 3, "desc": ""},
                {"text": "ุงููููููููู ุนุงููููู ูู ุจูุฏููููุ ุงููููููููู ุนุงููููู ูู ุณููููุนูุ ุงููููููููู ุนุงููููู ูู ุจูุตููุฑู...", "count": 3, "desc": ""},
                {"text": "ุงููููููููู ุฅููููู ุฃูุนููุฐู ุจููู ูููู ุงููููููุฑุ ููุงููููููุฑุ ููุฃูุนููุฐู ุจููู ููู ุนูุฐุงุจู ุงููููุจูุฑ...", "count": 3, "desc": ""},
                {"text": "ุงููููููููู ุฅูููููู ุฃุณููุฃูููููู ุงูุนูููููู ููุงูุนูุงููููุฉู ูู ุงูุฏููููููุง ููุงูุขุฎููุฑูุฉ...", "count": 1, "desc": ""},
                {"text": "ููุง ุญูููู ููุง ููููููู ุจูุฑูุญูููุชููู ุฃุณูุชูุบููุซู ุฃุตูููุญู ููู ุดูุฃููู ููููููู...", "count": 3, "desc": ""},
                {"text": "ุฃูุตูุจููุญูููุง ููุฃูุตูุจููุญู ุงููููููู ูููู ุฑูุจูู ุงูุนูุงูููููู...", "count": 1, "desc": ""},
                {"text": "ุงููููููููู ุนุงููููู ุงูุบููููุจู ููุงูุดูููุงุฏูุฉู ูุงุทููุฑู ุงูุณููุงูุงุชู ููุงูุฃุฑูุถู...", "count": 1, "desc": ""},
                {"text": "ุฃูุนููุฐู ุจูููููููุงุชู ุงููููู ุงูุชููุงูููุงุชู ูููู ุดููุฑูู ูุง ุฎููููู.", "count": 3, "desc": ""},
                {"text": "ุงููููููููู ุตูููู ููุณูููููู ููุจูุงุฑููู ุนูู ุณูุฏูุง ููุญูููุฏ.", "count": 10, "desc": "ุฃุฏุฑูุชู ุดูุงุนุชู ููู ุงูููุงูุฉ"},
                {"text": "ุงููููููููู ุฅููููุง ููุนููุฐู ุจููู ูููู ุฃููู ููุดูุฑููู ุจููู ุดูููุฆูุง ููุนููููููู...", "count": 3, "desc": ""},
                {"text": "ุงููููููููู ุฅููููู ุฃูุนููุฐู ุจููู ูููู ุงููููููู ููุงููุญูุฒููู...", "count": 3, "desc": ""},
                {"text": "ุฃุณูุชูุบูููุฑู ุงูููู ุงูุนูุธูููู ุงูููุฐูู ูุงู ุฅูููู ุฅูุงูู ููููุ ุงูุญูููู ุงูููููููููุ ููุฃุชููุจู ุฅููููู.", "count": 3, "desc": ""},
                {"text": "ููุง ุฑูุจููุ ูููู ุงููุญูููุฏู ููููุง ููููุจูุบูู ููุฌูููุงูู ููุฌูููููุ ููููุนูุธูููู ุณูููุทูุงูููู.", "count": 3, "desc": ""},
                {"text": "ุงููููููููู ุฅููููู ุฃูุณูุฃููููู ุนูููููุง ููุงููุนูุงุ ููุฑูุฒูููุง ุทููููุจูุงุ ููุนูููููุง ููุชูููุจููููุง.", "count": 1, "desc": ""},
                {"text": "ุงููููููููู ุฃูููุชู ุฑูุจููู ูุง ุฅููููู ุฅููุง ุฃูููุชูุ ุนููููููู ุชููููููููุชู...", "count": 1, "desc": ""},
                {"text": "ููุง ุฅููู ุฅููุง ุงูููู ููุญูุฏููู ููุง ุดูุฑูููู ููููุ ูููู ุงูููููููู ูููููู ุงููุญูููุฏู... (100 ูุฑุฉ)", "count": 100, "desc": "ุญุฑุฒ ูู ุงูุดูุทุงู"},
                {"text": "ุณูุจูุญูุงูู ุงูููู ููุจูุญููููุฏููู.", "count": 100, "desc": "ุญูุทููุชู ุฎูุทูุงููุงูู ููุฅููู ููุงููุชู ููุซููู ุฒูุจูุฏู ุงููุจูุญูุฑู"},
                {"text": "ุฃุณูุชูุบูููุฑู ุงูููู ููุฃุชููุจู ุฅูููููู.", "count": 100, "desc": ""}
            ],
            "evening": [
                {"text": "ุฃูุนููุฐู ุจูุงูููู ูููู ุงูุดููููุทูุงูู ุงูุฑููุฌูููู. ุงููููู ูุงู ุฅูููููู ุฅููุงูู ูููู ุงููุญูููู ุงูููููููููู... [ุขูุฉ ุงููุฑุณู]", "count": 1, "desc": "ุฃุฌูุฑ ูู ุงูุฌู"},
                {"text": "ุขูููู ุงูุฑููุณูููู ุจูููุง ุฃูููุฒููู ุฅููููููู ูููู ุฑูุจูููู... [ุฎูุงุชูู ุงูุจูุฑุฉ]", "count": 1, "desc": "ูู ูุฑุฃููุง ูู ูููุฉ ููุชุงู"},
                {"text": "ูููู ูููู ูฑูููููู ุฃูุญูุฏู (3) - ุงูููู (3) - ุงููุงุณ (3)", "count": 3, "desc": "ุชูููู ูู ูู ุดูุก"},
                {"text": "ุฃูุณูููุง ูุฃูุณูู ุงููููู ููู ูุงูุญูุฏ ููู...", "count": 1, "desc": ""},
                {"text": "ุงููููู ุฃูุช ุฑุจูู ูุง ุฅูู ุฅูุง ุฃูุช ุ ุฎููุชููู ูุฃูุง ุนุจูุฏู... (ุณูุฏ ุงูุงุณุชุบูุงุฑ)", "count": 1, "desc": "ูู ูุงุช ูู ูููุชู ุฏุฎู ุงูุฌูุฉ"},
                {"text": "ุฑุถููุช ุจุงููู ุฑุจูุง ูุจุงูุฅุณูุงู ุฏูููุง ูุจูุญููุฏ ุตูู ุงููู ุนููู ูุณูู ูุจููุง.", "count": 3, "desc": "ูุงู ุญูุง ุนูู ุงููู ุฃู ูุฑุถูู ููู ุงูููุงูุฉ"},
                {"text": "ุงููููู ุฅููู ุฃูุณูุช ุฃุดููุฏู ุ ูุฃุดููุฏ ุญูููุฉ ุนูุฑุดูู... (4 ูุฑุงุช)", "count": 4, "desc": "ุฃุนุชูู ุงููู ูู ุงููุงุฑ"},
                {"text": "ุงููููู ูุง ุฃูุณู ุจู ููู ูุนููุฉ ุฃู ุจุฃุญูุฏ ููู ุฎูููู...", "count": 1, "desc": "ุฃุฏู ุดูุฑ ูููุชู"},
                {"text": "ุญุณุจูู ุงููู ูุง ุฅูู ุฅูุง ูู ุนูููู ุชููููุช... (7 ูุฑุงุช)", "count": 7, "desc": "ููุงู ุงููู ูุง ุฃููู"},
                {"text": "ุจุณูู ุงููู ุงูุฐู ูุง ูุถูุฑ ูุน ุงุณููู ุดูุก...", "count": 3, "desc": "ูู ูุถุฑู ูู ุงููู ุดูุก"},
                {"text": "ุงููููู ุจู ุฃูุณูููุง ูุจู ุฃุตูุจุญูุงุ ูุจู ูุญููุง ูุจู ููููุช ูุฅูููู ุงููุตูุฑ.", "count": 1, "desc": ""},
                {"text": "ุฃูุณููุง ุนูู ูุทุฑุฉ ุงูุฅุณูุงูุ ูุนูู ูููุฉ ุงูุฅุฎูุงุต...", "count": 1, "desc": ""},
                {"text": "ุณุจุญูุงู ุงููู ูุจุญููุฏู ุนุฏุฏ ุฎูููู...", "count": 3, "desc": ""},
                {"text": "ุงููููู ุนุงูููู ูู ุจุฏููู ุ ุงููููู ุนุงูููู ูู ุณููุนู...", "count": 3, "desc": ""},
                {"text": "ุงููููู ุฅููู ุฃุนููุฐ ุจู ูู ุงููููุฑ ุ ูุงููููุฑ...", "count": 3, "desc": ""},
                {"text": "ุงููููู ุฅููู ุฃุณูุฃููู ุงูุนููู ูุงูุนูุงูููุฉ ูู ุงูุฏูููุง ูุงูุขุฎูุฑุฉ...", "count": 1, "desc": ""},
                {"text": "ูุง ุญู ูุง ูููู ุจุฑุญูุชู ุฃุณุชุบูุซ ุฃุตูุญ ูู ุดุฃูู ููู...", "count": 3, "desc": ""},
                {"text": "ุฃูุณููุง ูุฃูุณู ุงูููู ููู ุฑุจ ุงูุนุงูููู...", "count": 1, "desc": ""},
                {"text": "ุงููููู ุนุงููู ุงูุบููุจ ูุงูุดููุงุฏุฉ ูุงุทูุฑ ุงูุณูุงูุงุช ูุงูุฃุฑุถ...", "count": 1, "desc": ""},
                {"text": "ุฃูุนููุฐู ุจูููููููุงุชู ุงููููู ุงูุชููุงูููุงุชู ูููู ุดููุฑูู ูุง ุฎููููู.", "count": 3, "desc": ""},
                {"text": "ุงูููู ุตู ูุณูู ูุจุงุฑู ุนูู ูุจููุง ูุญูุฏ.", "count": 10, "desc": "ุฃุฏุฑูุชู ุดูุงุนุชู ููู ุงูููุงูุฉ"},
                {"text": "ุงูููู ุฅูุง ูุนูุฐ ุจู ูู ุฃู ูุดุฑู ุจู ุดูุฆุง ูุนููู...", "count": 3, "desc": ""},
                {"text": "ุงูููู ุฅูู ุฃุนูุฐ ุจู ูู ุงููู ูุงูุญุฒู...", "count": 3, "desc": ""},
                {"text": "ุฃุณุชุบูุฑ ุงููู ุงูุนุธูู ุงูุฐู ูุง ุฅูู ุฅูุง ูู...", "count": 3, "desc": ""},
                {"text": "ูุง ุฑุจ , ูู ุงูุญูุฏ ููุง ููุจุบู ูุฌูุงู ูุฌูู...", "count": 3, "desc": ""},
                {"text": "ุงูููู ุฅูู ุฃุณุฃูู ุนููุง ูุงูุนุงุ ูุฑุฒูุง ุทูุจุงุ ูุนููุง ูุชูุจูุง.", "count": 1, "desc": ""},
                {"text": "ุงูููู ุฃูุช ุฑุจู ูุง ุฅูู ุฅูุง ุฃูุช ุ ุนููู ุชูููุช...", "count": 1, "desc": ""},
                {"text": "ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ูู... (100 ูุฑุฉ)", "count": 100, "desc": "ุญุฑุฒ ูู ุงูุดูุทุงู"},
                {"text": "ุณูุจูุญูุงูู ุงูููู ููุจูุญููููุฏููู.", "count": 100, "desc": "ุญูุทููุชู ุฎูุทูุงููุงูู"},
                {"text": "ุฃุณูุชูุบูููุฑู ุงูููู ููุฃุชููุจู ุฅูููููู", "count": 100, "desc": ""}
            ],
            "sleep": [
                {"text": "ุงููููููููู ุฅููููููู ุฎููููููุชู ููููุณูู ููุฃููููุชู ุชููููููุงููุง...", "count": 1, "desc": ""},
                {"text": "ุงููููููููู ููููู ุนูุฐุงุจูููู ููููููู ุชูุจููุนูุซู ุนูุจูุงุฏูู. (3 ูุฑุงุช)", "count": 3, "desc": "ูููููุง ุญูู ูุถุน ูุฏู ุงููููู ุชุญุช ุฎุฏู ุงูุฃููู"},
                {"text": "ุจูุงุณูููููู ุงููููููููู ุฃููููุชู ููุฃูุญูููุง.", "count": 1, "desc": ""},
                {"text": "ุจุงุณูู ุฑุจ ูุถุนุช ุฌูุจู ูุจู ุฃุฑูุนู...", "count": 1, "desc": ""},
                {"text": "ุงูููู ุฃุณููุช ููุณู ุฅูููุ ููุฌูุช ูุฌูู ุฅููู...", "count": 1, "desc": "ูู ูุงููุง ููุงุช ูู ูููุชู ูุงุช ุนูู ุงููุทุฑุฉ"},
                {"text": "ุงููุญูููุฏู ูููู ุงูููุฐู ุฃูุทููุนููููุง ููุณูููุงูุง...", "count": 1, "desc": ""},
                {"text": "ุณูุจูุญูุงูู ุงููููู (33) , ุงููุญูููุฏู ููููููู (33) , ุงูููููู ุฃูููุจูุฑู (34)", "count": 1, "desc": "ุฎูุฑ ูู ูู ุฎุงุฏู"},
                {"text": "ุงูุฅุฎูุงุต ูุงููุนูุฐุชูู (ูุน ุงูููุซ ูุงููุณุญ ุนูู ุงูุฌุณุฏ)", "count": 3, "desc": ""}
            ]
        }

        # =====================================================================
        #                           ุนูุงุตุฑ ุงููุงุฌูุฉ ุงููุฎุตุตุฉ
        # =====================================================================
        
        current_category = []
        current_index = 0
        current_count = 0

        # 1. ุดุฑูุท ุงูุนููุงู
        app_bar = ft.Container(
            content=ft.Row([
                # ๐ ุงุณุชุฎุฏุงู ุฃููููุฉ ุนุงูุฉ (MOSQUE) ูุถูุงู ุงูุชูุงูู
                ft.Icon(ft.icons.MOSQUE, color="white", size=32),
                ft.Container(width=10),
                ft.Text("ุฐููููุฑูููู", size=24, weight="bold", color="white", font_family="Cairo"),
            ], alignment="center"),
            padding=ft.padding.only(top=40, bottom=20),
            gradient=ft.LinearGradient(
                begin=ft.alignment.top_right,
                end=ft.alignment.bottom_left,
                colors=["#00b09b", "#96c93d"],
            ),
            border_radius=ft.border_radius.only(bottom_left=30, bottom_right=30),
            shadow=ft.BoxShadow(blur_radius=15, color="#33000000", offset=ft.Offset(0, 5))
        )

        # 2. ุนูุงุตุฑ ุตูุญุฉ ุงูุฃุฐูุงุฑ
        txt_zikr = ft.Text("", size=20, weight="bold", text_align="center", color="#2d3436", font_family="Cairo")
        txt_desc = ft.Text("", size=14, color="#00b894", text_align="center", font_family="CairoReg", weight="bold")
        txt_counter = ft.Text("0", size=55, color="white", weight="bold", font_family="Cairo")
        
        # ุดุฑูุท ุงูุชูุฏู
        progress_bar = ft.ProgressBar(width=280, color="#00b09b", bgcolor="#dfe6e9", value=0, height=8, border_radius=4)
        txt_progress_text = ft.Text("0/0", color="#636e72", size=13, weight="bold")

        # ุฒุฑ ุงูุนุฏุงุฏ
        btn_sbh = ft.Container(
            content=txt_counter,
            width=170, height=170,
            border_radius=85,
            alignment=ft.alignment.center,
            shape=ft.BoxShape.CIRCLE,
            gradient=ft.LinearGradient(
                begin=ft.alignment.top_left,
                end=ft.alignment.bottom_right,
                colors=["#4facfe", "#00f2fe"],
            ),
            shadow=ft.BoxShadow(blur_radius=20, color="#4facfe", offset=ft.Offset(0, 8)),
            animate_scale=ft.animation.Animation(100, ft.AnimationCurve.EASE_OUT),
            on_click=lambda e: on_click_counter(e)
        )

        # =====================================================================
        #                           ุงูููุทู (Logic)
        # =====================================================================

        def update_view():
            if current_index < len(current_category):
                item = current_category[current_index]
                txt_zikr.value = item['text']
                txt_desc.value = f"โจ {item['desc']}" if item['desc'] else ""
                txt_counter.value = str(current_count)
                
                progress_val = (current_index) / len(current_category)
                progress_bar.value = progress_val
                txt_progress_text.value = f"ุงูุฐูุฑ {current_index + 1} ูู {len(current_category)}"
                
                btn_sbh.gradient = ft.LinearGradient(colors=["#4facfe", "#00f2fe"])
                btn_sbh.disabled = False
                btn_sbh.shadow.color = "#4facfe"
            else:
                txt_zikr.value = "โจ ุตุฏู ุงููู ุงูุนุธูู โจ\nุชูุจู ุงููู ุทุงุนุชูู"
                txt_desc.value = ""
                txt_counter.value = "โ"
                progress_bar.value = 1
                txt_progress_text.value = "ุชูุช ุจุญูุฏ ุงููู"
                
                btn_sbh.gradient = ft.LinearGradient(colors=["#b2bec3", "#636e72"])
                btn_sbh.disabled = True
                btn_sbh.shadow.color = "#b2bec3"
            
            page.update()

        def on_click_counter(e):
            nonlocal current_count, current_index
            
            # ุชุฃุซูุฑ ุงูุญุฑูุฉ
            btn_sbh.scale = 0.92
            btn_sbh.update()
            time.sleep(0.08)
            btn_sbh.scale = 1.0
            btn_sbh.update()

            if current_index >= len(current_category): return

            current_count -= 1
            if current_count > 0:
                txt_counter.value = str(current_count)
                page.update()
            else:
                current_index += 1
                if current_index < len(current_category):
                    current_count = current_category[current_index]['count']
                update_view()

        def start_session(category_name):
            nonlocal current_category, current_index, current_count
            current_category = AZKAR_DATA[category_name]
            current_index = 0
            current_count = current_category[0]['count']
            
            update_view()
            
            page.clean()
            page.add(
                ft.Stack([
                    ft.Column([
                        app_bar,
                        ft.Container(height=20),
                        
                        ft.Container(
                            content=ft.Column([
                                ft.Row([txt_progress_text], alignment="center"),
                                progress_bar,
                                ft.Container(height=20),
                                txt_zikr,
                                ft.Container(height=10),
                                ft.Divider(color="#f1f2f6", thickness=1),
                                txt_desc
                            ], horizontal_alignment="center"),
                            padding=25,
                            margin=20,
                            bgcolor="white",
                            border_radius=25,
                            shadow=ft.BoxShadow(blur_radius=15, color="#1A000000", offset=ft.Offset(0, 5)),
                        ),
                        
                        ft.Container(height=15),
                        btn_sbh,
                        ft.Container(height=30),
                        
                        ft.TextButton(
                            "ุฑุฌูุน ูููุงุฆูุฉ", 
                            # ๐ ุงุณุชุฎุฏุงู ุฃููููุฉ ุนุงูุฉ (ARROW_BACK)
                            icon=ft.icons.ARROW_BACK, 
                            icon_color="#636e72",
                            style=ft.ButtonStyle(color="#636e72"),
                            on_click=go_home
                        )
                    ], horizontal_alignment="center")
                ])
            )

        def get_menu_card(title, sub, icon, color_start, color_end, func):
            return ft.Container(
                content=ft.Row([
                    ft.Container(
                        content=ft.Icon(icon, color="white", size=28),
                        width=55, height=55,
                        border_radius=18,
                        # ุงุณุชุฎุฏุงู ููู Hex ููุดูุงููุฉ
                        bgcolor="#40ffffff",
                        alignment=ft.alignment.center
                    ),
                    ft.Container(width=15),
                    ft.Column([
                        ft.Text(title, size=18, weight="bold", color="white", font_family="Cairo"),
                        ft.Text(sub, size=12, color="#f1f2f6", font_family="CairoReg"),
                    ], spacing=3, alignment="center"),
                ], alignment="start"),
                width=330, height=95,
                padding=20,
                border_radius=22,
                gradient=ft.LinearGradient(
                    begin=ft.alignment.center_left,
                    end=ft.alignment.center_right,
                    colors=[color_start, color_end],
                ),
                shadow=ft.BoxShadow(blur_radius=10, color=color_start, offset=ft.Offset(0, 5)),
                on_click=func,
                animate_scale=ft.animation.Animation(100, ft.AnimationCurve.EASE_IN),
            )

        def go_home(e):
            page.clean()
            page.add(
                ft.Column([
                    app_bar,
                    ft.Container(height=30),
                    ft.Text("ุงุฎุชุฑ ุงูุฃุฐูุงุฑ", size=20, weight="bold", color="#2d3436", font_family="Cairo"),
                    ft.Container(height=15),
                    
                    # ๐ ุงุณุชุฎุฏุงู ุฃููููุงุช ุนุงูุฉ (WB_SUNNY, NIGHTS_STAY, BED)
                    get_menu_card("ุฃุฐูุงุฑ ุงูุตุจุงุญ", "ุจุฏุงูุฉ ูููู ุจุฐูุฑ ุงููู", ft.icons.WB_SUNNY, "#ff9966", "#ff5e62", lambda _: start_session("morning")),
                    ft.Container(height=15),
                    get_menu_card("ุฃุฐูุงุฑ ุงููุณุงุก", "ุญุตู ุงููุณุงุก", ft.icons.NIGHTS_STAY, "#396afc", "#2948ff", lambda _: start_session("evening")),
                    ft.Container(height=15),
                    get_menu_card("ุฃุฐูุงุฑ ุงูููู", "ุฑุงุญุฉ ูุทูุฃูููุฉ", ft.icons.BED, "#8e44ad", "#c0392b", lambda _: start_session("sleep")),
                    
                    ft.Container(height=40),
                    ft.Text("ุชุทุจูู ุฐูุฑูู | ุตุฏูุฉ ุฌุงุฑูุฉ", color="#b2bec3", size=11, font_family="CairoReg")
                ], horizontal_alignment="center", scroll="hidden")
            )

        go_home(None)

    except Exception as e:
        page.add(ft.SafeArea(ft.Text(f"ุญุฏุซ ุฎุทุฃ:\n{e}", color="red", size=20)))

ft.app(target=main)
